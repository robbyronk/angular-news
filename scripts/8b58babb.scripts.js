"use strict";angular.module("angularNewsFrontendApp",["ui.bootstrap","ngCookies"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/post/:postId",{templateUrl:"views/post.html",controller:"PostCtrl"}).when("/user/:userId",{templateUrl:"views/user.html",controller:"UserCtrl"}).when("/access_token/:accessToken",{templateUrl:"views/access_token.html",controller:"AccessTokenCtrl"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.responseInterceptors.push("interceptor")}]),angular.module("angularNewsFrontendApp").factory("interceptor",["$injector","$cookies","$location",function(a,b,c){var d="Authentication";return function(e){var f=a.get("$http"),g=function(a){if(401===a.status){var g=f.defaults.headers.common[d];if(angular.isDefined(g))b[d]=f.defaults.headers.common[d]=void 0,c.path("/");else if(angular.isDefined(b[d]))return f.defaults.headers.common[d]=b[d],f(a.config)}return e},h=function(a){return angular.isDefined(b[d])&&angular.isUndefined(f.defaults.headers.common[d])&&(f.defaults.headers.common[d]=b[d]),a};return e.then(h,g)}}]),angular.module("angularNewsFrontendApp").controller("MainCtrl",["ServerUrl","$scope","$http","$log","$rootScope",function(a,b,c,d,e){var f=a+"posts";c.get(f).success(function(a){b.posts=a}),e.me=c.get(a+"session").then(function(a){return a.data}),b.postLink=function(){c.post(f,{title:b.title,link:b.link}).then(function(a){b.posts.unshift(a.data),b.title="",b.link=""})}}]),angular.module("angularNewsFrontendApp").controller("PostCtrl",["$scope","$routeParams","$http","$log","$rootScope","ServerUrl",function(a,b,c,d,e,f){e.me=c.get(f+"session").then(function(a){return a.data}),c.get(f+"posts/"+b.postId).success(function(b){a.post=b});var g=f+"posts/"+b.postId+"/comments";c.get(g).success(function(b){a.comments=b}),a.postComment=function(){c.post(g,{content:a.content}).then(function(b){a.comments.unshift(b.data),a.content=""})}}]),angular.module("angularNewsFrontendApp").controller("UserCtrl",["$scope","$http","$routeParams","$rootScope","ServerUrl",function(a,b,c,d,e){d.me=b.get(e+"session").then(function(a){return a.data});var f=e+"users/"+c.userId;b.get(f).success(function(b){a.username=b.name}),b.get(f+"/posts").success(function(b){a.posts=b}),b.get(f+"/comments").success(function(b){a.comments=b})}]),angular.module("angularNewsFrontendApp").directive("userLink",function(){return{template:'<a href="#/user/{{userId}}">{{username}}</a> ',scope:{userId:"=user"},controller:["$http","$scope","ServerUrl",function(a,b,c){b.$watch("userId",function(d){angular.isUndefined(d)||a.get(c+"users/"+b.userId).success(function(a){b.username=a.name}).error(function(){b.username="An Unknown"})})}],restrict:"E"}}),angular.module("angularNewsFrontendApp").directive("postLink",function(){return{template:'<a href="#/post/{{postId}}">{{title}}</a> ',scope:{postId:"=post"},controller:["$http","$scope","ServerUrl",function(a,b,c){b.$watch("postId",function(d){angular.isUndefined(d)||a.get(c+"posts/"+b.postId).success(function(a){b.title=a.title})})}],restrict:"E"}}),angular.module("angularNewsFrontendApp").controller("AccessTokenCtrl",["ServerUrl","$scope","$http","$routeParams","$rootScope","$location","$cookies",function(a,b,c,d,e,f,g){var h="Authentication";g[h]=c.defaults.headers.common[h]=d.accessToken,e.me=c.get(a+"session").then(function(a){return a.data}),f.path("#/")}]),angular.module("angularNewsFrontendApp").factory("ServerUrl",function(){return"http://angular-news.ayecapta.in/angular-news-backend/api/"});